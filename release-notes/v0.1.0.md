# Release Notes - v0.1.0

**Release Date:** November 10, 2025

## üéâ Initial Release

We're excited to announce the first release of **frame-master-plugin-cloudflare-pages-functions-action**! This plugin brings server action capabilities to Cloudflare Pages, enabling you to write type-safe server-side functions that can be called from the client as async functions.

## üöÄ What is this plugin?

This plugin acts as a bridge between your client-side code and Cloudflare Pages Functions, similar to how server actions work in modern frameworks. It automatically compiles TypeScript/JavaScript files in your `actions` directory into Cloudflare Pages Functions while preserving full type safety on both the server and client side.

## ‚ú® Key Features

### Type-Safe Server Actions

- **End-to-End Type Safety**: Automatically generates type-safe client functions from your server-side action exports
- **Seamless Integration**: Call server functions from the client as simple async functions
- **Full TypeScript Support**: Leverages TypeScript for compile-time safety and IntelliSense

### Cloudflare Pages Integration

- **Native Cloudflare Support**: Built specifically for Cloudflare Pages Functions
- **Environment Context**: Access Cloudflare environment bindings, KV stores, and other platform features via `getContext()`
- **HTTP Method Support**: Support for all HTTP methods (GET, POST, PUT, DELETE, PATCH, etc.)

### Developer Experience

- **Hot Module Replacement**: Automatic rebuilds when action files change during development
- **Development Proxy**: Seamlessly proxies requests to Wrangler dev server during local development
- **File System Router**: Uses Next.js-style routing for organizing your actions

### Data Handling

- **Multiple Data Types**: Supports JSON, Files, File arrays, FormData, and Blob responses
- **Automatic Serialization**: Handles data serialization/deserialization automatically
- **FormData Support**: Built-in FormData handling for file uploads

## üì¶ Installation

```bash
bun add frame-master-plugin-cloudflare-pages-functions-action
```

## üîß Configuration

Add the plugin to your `frame-master.config.ts`:

```typescript
import CloudFlareWorkerAction from "frame-master-plugin-cloudflare-pages-functions-action";

const cloudflareWorkerActionPlugin = CloudFlareWorkerAction({
  actionBasePath: "src/actions", // Directory containing your actions
  outDir: ".frame-master/build", // Build output directory
  serverPort: 8787, // Optional: Wrangler dev server port
});

export default {
  plugins: [
    cloudflareWorkerActionPlugin,
    // ... other plugins
  ],
} satisfies FrameMasterConfig;
```

## üí° Usage Example

### Server-Side Action

Create an action file at `src/actions/auth/login.ts`:

```typescript
import { getContext } from "frame-master-plugin-cloudflare-pages-functions-action/context";

export async function POST(email: string, password: string) {
  const ctx = getContext(arguments);

  // Access Cloudflare environment
  const user = await ctx.env.DB.get(`user:${email}`);

  return {
    success: true,
    userId: user.id,
  } as const;
}

export async function GET() {
  const ctx = getContext(arguments);

  return {
    status: "authenticated",
  } as const;
}
```

### Client-Side Usage

Call the action from your client code:

```typescript
import { POST as login, GET as getStatus } from "src/actions/auth/login";

// Fully type-safe async function call
const result = await login("user@example.com", "password123");
console.log(result.userId); // TypeScript knows this exists!

const status = await getStatus();
console.log(status.status); // Type-safe!
```

## üõ†Ô∏è Technical Details

### Exports

The plugin provides the following exports:

- **Main plugin**: `frame-master-plugin-cloudflare-pages-functions-action`
- **Context helper**: `frame-master-plugin-cloudflare-pages-functions-action/context`
- **Types**: `frame-master-plugin-cloudflare-pages-functions-action/types`

### Plugin Capabilities

- Scans action directory for TypeScript/JavaScript files
- Generates client-side wrapper functions with preserved types
- Compiles server-side functions to Cloudflare Pages Functions format
- Provides runtime context for accessing Cloudflare environment
- Handles development proxy to Wrangler dev server
- Watches file system for changes and rebuilds automatically

## üìã Requirements

- **frame-master**: ^2.0.4
- **TypeScript**: ^5.9.3
- **Node.js/Bun**: Compatible runtime
- **Cloudflare Account**: For deployment

## üéØ Use Cases

- Building API endpoints with type safety
- Handling authentication flows
- File uploads and processing
- Database operations with Cloudflare D1
- KV store interactions
- Durable Objects communication
- Server-side data fetching

## üîú Future Plans

This is the initial release, and we're planning to add:

- Middleware support for actions
- Enhanced error handling
- Request/response interceptors
- Built-in validation helpers
- Rate limiting utilities

## üêõ Known Issues

None at this time. Please report any issues on the GitHub repository.

## üìù License

This plugin follows the same license as frame-master.

---

We hope this plugin enhances your Cloudflare Pages development experience! Feel free to provide feedback or contribute to future improvements.
